{% extends "base.html" %}

{% block content %}


    <hr>
    <div class="large-12 columns">

        {% if user.is_anonymous %}
            <h3>Hi there, please register or login to add messages</h3>
        {% else %}
            <h3>Hi {{user}}, feel free to add messages</h3>
        {% endif %}

        <hr>
        {% for comment in comments %}
            <div class="row">
                <div class="large-2 columns small-3"><p><strong>{{ comment.author }}</strong></p><img src="http://placehold.it/80x80&text=[img]"/></div>
                <div class="large-10 columns">
                    <p><strong>{{ comment.title }}:</strong>{{ comment.text}}</p>
                    {% if not user.is_anonymous %}
                        <ul class="inline-list">
                            <li><a href="" data-reveal-id="AddMessage" onclick="javascript:setid({{comment.pk}}); return false;">Add Message</a></li>
                        </ul>
                    {% endif %}


                    {% for message in comment.message_set.all %}
                    <div class="row">
                        <div class="large-2 columns small-3"><p><strong>{{ message.user }}</strong></p><img src="http://placehold.it/50x50&text=[img]"/></div>
                        <div class="large-10 columns"><p>{{ message.text }}</p></div>
                    </div>
                    <hr>
                    {% endfor %}
                </div>
            </div>
            <hr>
        {% endfor %}
    {% if not user.is_anonymous %}
        <div id="AddMessage" class=reveal-modal data-reveal aria-labelledby="Create New Message" aria-hidden="true" role="dialog">
            <form method="post">
                {% csrf_token %}
                {{ form.as_p }}
                <input type="hidden" name="comment_id" id="comment_id" />
                <p>
                  <button type="submit">
                    Submit
                  </button>
                </p>
            </form>
            <a class="close-reveal-modal" aria-label="Close">&#215;</a>
        </div>
    {% endif %}
{% endblock %}
